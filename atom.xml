<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://rockythink.github.io</id>
    <title>RockyThink</title>
    <updated>2021-12-01T16:34:55.273Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://rockythink.github.io"/>
    <link rel="self" href="https://rockythink.github.io/atom.xml"/>
    <subtitle>å¹³å‡¡çš„ä»å®¹</subtitle>
    <logo>https://rockythink.github.io/images/avatar.png</logo>
    <icon>https://rockythink.github.io/favicon.ico</icon>
    <rights>All rights reserved 2021, RockyThink</rights>
    <entry>
        <title type="html"><![CDATA[å ¡å’æœºsshé€šé“å¸¸é©»ã€ç°ç½‘è¿æ•°æ®åº“ã€‘ å ¡å’æœºsshé€šé“å¸¸é©»ã€ç°ç½‘è¿æ•°æ®åº“ã€‘ ]]></title>
        <id>https://rockythink.github.io/post/hello-gridea/</id>
        <link href="https://rockythink.github.io/post/hello-gridea/">
        </link>
        <updated>2018-12-11T16:00:00.000Z</updated>
        <content type="html"><![CDATA[<h2 id="åœºæ™¯">åœºæ™¯</h2>
<p>ä¸ºäº†æ•°æ®å®‰å…¨ï¼Œå¤§å¤šæ•°æ®åº“ä¸å¯¹å¤–ç½‘å¼€æ”¾ï¼Œæœ¬åœ°æœºå™¨å¦‚æœéœ€è¦è¿æ¥æ•°æ®åº“ï¼ŒåŸºæœ¬éƒ½æ˜¯é€šè¿‡sshé€šé“çš„æ–¹å¼æ¥è¿æ¥ã€‚<br>
åŸºæœ¬åŸç†æ˜¯è¿™æ ·çš„ï¼š<br>
ä½ å·¥ä½œçš„ç”µè„‘ï¼ˆå®¢æˆ·ç«¯ï¼‰ï¼Œæ˜¯åœ¨ä¸€ä¸ªå¤–ç½‘ç¯å¢ƒä¸‹æˆ‘ä»¬è®¡ä½œã€Aã€‘å¥½äº†ï¼›<br>
æ•°æ®åº“ã€æ¯”æ–¹è¯´æ˜¯mysqlã€‘æ‰€åœ¨çš„æœåŠ¡å™¨åœ¨ä¸€ä¸ªå†…ç½‘ç¯å¢ƒä¸‹ï¼ˆæˆ–è€…åªæœ‰å†…ç½‘æ‰èƒ½è¿æ¥ï¼‰ï¼Œæˆ‘ä»¬è®¡ä½œã€Bã€‘ï¼›<br>
å ¡å’æœºå’Œæ•°æ®åº“åœ¨åŒä¸€ä¸ªå†…ç½‘ï¼Œä½†å¯ä»¥é€šè¿‡å¤–ç½‘è®¿é—®ï¼Œè®¡ä½œã€Cã€‘ï¼›</p>
<p>æˆ‘ä»¬é€šè¿‡Navicatæˆ–æ˜¯datagripç­‰å®¢æˆ·ç«¯è®¿é—®æ•°æ®åº“çš„æ—¶å€™<br>
è¿‡ç¨‹æ˜¯è¿™æ ·çš„ï¼š<br>
1ã€Aä¼šå…ˆé€šè¿‡sshæ¥è¿æ¥Cï¼ˆä¸€èˆ¬æ˜¯22ç«¯å£ï¼‰ï¼›<br>
2ã€Aå‘Šè¯‰Cï¼Œè®©Cæ¥è®¿é—®Bï¼Œå¹¶æŠŠBçš„3306ç«¯å£æ˜ å°„åˆ°Açš„æŸä¸€ä¸ªç«¯å£ï¼ˆé»˜è®¤éšæœºä¹Ÿå¯ä»¥æŒ‡å®šï¼‰ä¸Šï¼›<br>
3ã€ç„¶åï¼Œå®¢æˆ·ç«¯Aå°±å¯ä»¥é€šè¿‡è®¿é—®<code>Aè‡ªå·±çš„è¿™ä¸ªç«¯å£</code>é—´æ¥è®¿é—®Bäº†;</p>
<p>ä½†æ˜¯ï¼Œ<strong>å¹¶ä¸æ˜¯æ‰€ä»¥çš„æ•°æ®åº“å®¢æˆ·ç«¯éƒ½å¯ä»¥æ¥é…ç½®sshçš„</strong>ï¼Œæ¯”æ–¹è¯´ï¼Œæˆ‘ä»¬è¦åœ¨Aä¸Šéƒ¨ç½²ä¸ªæ•°æ®è°ƒåº¦ç³»ç»Ÿï¼›</p>
<p>æ‰€ä»¥ï¼Œæˆ‘ä»¬è¦ç”¨ä¸€ä¸ªæœåŠ¡æ¥å¸®åŠ©æˆ‘ä»¬æŠŠå‰ä¸¤æ­¥çš„äº‹æƒ…åšäº†ï¼Œç„¶åæˆ‘ä»¬åªè¦åšåä¸€æ­¥å°±å¥½äº†ï¼›</p>
<h2 id="å¾ˆç®€å•">å¾ˆç®€å•</h2>
<pre><code class="language-shell">/usr/bin/ssh -N -L 0.0.0.0:[Açš„ç«¯å£]:[Bçš„ip]:[Bçš„æ•°æ®åº“ç«¯å£] [Cçš„ç”¨æˆ·å]@[Cçš„å¤–ç½‘ip] -i /root/.ssh/id_rsa
</code></pre>
<p>ä¸¾ä¸ªğŸŒ°</p>
<pre><code class="language-shell">/usr/bin/ssh -N -L 0.0.0.0:3306:10.10.10.243:3306 user1@10.30.0.136 -i /root/.ssh/id_rsa
</code></pre>
<p>è¿™æ ·ï¼Œç›´æ¥è¿æ¥Aæœºå™¨çš„IPå’Œ3306ç«¯å£å°±å¯ä»¥äº†</p>
<p>ä½†æ˜¯è¿™æ ·ä¼šæ–­æ‰</p>
<p>æˆ‘ä»¬æŠŠå®ƒåŒ…è£…æˆä¸€ä¸ªåå°æœåŠ¡å§</p>
<pre><code class="language-shell">cd /usr/lib/systemd/system
vim db_ssh.service
</code></pre>
<p>ç¼–è¾‘</p>
<pre><code>
Description=db_ssh

Requires=network.target

After=network.target

[Service]

Type=simple

#å¼€å§‹å‘½ä»¤
ExecStart= /usr/bin/ssh -N -L 0.0.0.0:3306:10.10.10.243:3306 user1@10.30.0.136 -i /root/.ssh/id_rsa
#é‡å¯ç­‰å¾…æ—¶é—´
# RestartSec=1s
#é‡å¯æ—¶æœº
Restart=on-failure
KillMode=process

User=root

Group=root

[Install]

WantedBy=multi-user.target
</code></pre>
<p>ç„¶åï¼š</p>
<pre><code class="language-shell">systemctl daemon-reload

systemctl start db_ssh.service
</code></pre>
<p>æŸ¥çœ‹æœåŠ¡çŠ¶æ€</p>
<pre><code class="language-shell">systemctl start db_ssh.service
</code></pre>
<pre><code>ps aux | grep ssh
</code></pre>
<p>çœ‹çœ‹è¿›ç¨‹é‡Œæœ‰æ²¡æœ‰ä½ æƒ³çœ‹åˆ°çš„å°±å¥½å•¦</p>
<p>ç¥å¥½ï¼</p>
]]></content>
    </entry>
</feed>